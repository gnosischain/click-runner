services:
  click-runner:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: click-runner
    volumes:
      - ./queries:/app/queries
    environment:
      CH_HOST: ${CH_DB_HOST}
      CH_PORT: ${CH_NATIVE_PORT}
      CH_USER: ${CH_USER}
      CH_PASSWORD: ${CH_PASSWORD}
      CH_DB: ${CH_DB}
      CH_SECURE: ${CH_SECURE}
      CH_VERIFY: "False"
      CH_QUERIES: "queries/create_ember_table.sql,queries/insert_ember_data.sql,queries/optimize_ember_data.sql"

      CH_QUERY_VAR_EMBER_DATA_URL: ${EMBER_DATA_URL:-}
      CH_QUERY_VAR_S3_ACCESS_KEY: ${S3_ACCESS_KEY:-}
      CH_QUERY_VAR_S3_SECRET_KEY: ${S3_SECRET_KEY:-}
      CH_QUERY_VAR_S3_BUCKET: ${S3_BUCKET:-}
      CH_QUERY_VAR_S3_REGION: ${S3_REGION:-}
